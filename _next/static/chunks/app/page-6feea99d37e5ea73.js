(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{770:(e,t,r)=>{Promise.resolve().then(r.bind(r,3792))},3792:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(5155),s=r(2115),l=r(3464),n=r(1890);let o=e=>{let{label:t,checked:r,onChange:s}=e;return(0,a.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:r,onChange:s,className:"bg-gray-700 border-gray-600 rounded focus:ring-green-500 w-4 h-4 text-green-600"}),(0,a.jsx)("span",{className:"text-gray-300 select-none",children:t})]})};function i(){let[e,t]=(0,s.useState)(""),[r,i]=(0,s.useState)([]),[c,d]=(0,s.useState)(!1),[x,g]=(0,s.useState)(null),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)(""),[b,j]=(0,s.useState)("latest"),[y,v]=(0,s.useState)(0),[f,N]=(0,s.useState)(2),[w,k]=(0,s.useState)(0),[P,S]=(0,s.useState)(!1),[C,_]=(0,s.useState)(!1),[A,L]=(0,s.useState)(!1),[E,R]=(0,s.useState)(!1),B=async()=>{if(e){d(!0),g(null),i([]);try{let t=n.env.NEXT_PUBLIC_API_URL||"http://127.0.0.1:8000",r=await l.A.get("".concat(t,"/search/").concat(e),{params:{minPrice:u||void 0,maxPrice:m||void 0,sortBy:b,rt:y||void 0,condition:f||void 0,latestProduct:w||void 0,isDiscount:P||void 0,isPlus:C||void 0,cod:A||void 0,bebasOngkirExtra:E||void 0}});console.log("API Response Data:",r.data),Array.isArray(r.data)?i(r.data):(console.error("API did not return an array:",r.data),i([]))}catch(e){console.error("Error fetching search results:",e)}finally{d(!1)}}};return(0,a.jsx)("main",{className:"bg-gray-900 p-4 sm:p-8 min-h-screen text-white",children:(0,a.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,a.jsx)("h1",{className:"mb-2 font-bold text-green-400 text-4xl sm:text-5xl text-center",children:"Tokopedia Scraper"}),(0,a.jsx)("p",{className:"mb-8 text-gray-400 text-center",children:"Powered by Next.js, Tailwind CSS, and a Python Backend"}),(0,a.jsxs)("div",{className:"flex justify-center gap-2 mb-4",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),onKeyDown:e=>"Enter"===e.key&&B(),placeholder:"Search for a product...",className:"bg-gray-800 px-4 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 w-full max-w-lg"}),(0,a.jsx)("button",{onClick:B,disabled:c,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-500 px-6 py-2 rounded-lg font-semibold text-white transition-colors disabled:cursor-not-allowed shrink-0",children:c?"Searching...":"Search"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 mx-auto mb-8 p-4 rounded-lg max-w-4xl",children:[(0,a.jsxs)("div",{className:"gap-x-6 gap-y-4 grid grid-cols-2 sm:grid-cols-3 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"minPrice",className:"block mb-1 font-medium text-gray-300 text-sm",children:"Min Price"}),(0,a.jsx)("input",{id:"minPrice",type:"number",value:u,onChange:e=>h(e.target.value),placeholder:"e.g., 10000",className:"bg-gray-700 px-3 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 w-full text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"maxPrice",className:"block mb-1 font-medium text-gray-300 text-sm",children:"Max Price"}),(0,a.jsx)("input",{id:"maxPrice",type:"number",value:m,onChange:e=>p(e.target.value),placeholder:"e.g., 500000",className:"bg-gray-700 px-3 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 w-full text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"sortBy",className:"block mb-1 font-medium text-gray-300 text-sm",children:"Sort By"}),(0,a.jsxs)("select",{id:"sortBy",value:b,onChange:e=>j(e.target.value),className:"bg-gray-700 px-3 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 w-full text-white",children:[(0,a.jsx)("option",{value:"relevance",children:"Relevance"}),(0,a.jsx)("option",{value:"price_asc",children:"Price: Low to High"}),(0,a.jsx)("option",{value:"price_desc",children:"Price: High to Low"}),(0,a.jsx)("option",{value:"latest",children:"Latest"}),(0,a.jsx)("option",{value:"review",children:"Review"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"rating",className:"block mb-1 font-medium text-gray-300 text-sm",children:"Min Rating"}),(0,a.jsxs)("select",{id:"rating",value:y,onChange:e=>v(Number(e.target.value)),className:"bg-gray-700 px-3 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 w-full text-white",children:[(0,a.jsx)("option",{value:"0",children:"Any"}),(0,a.jsx)("option",{value:"1",children:"1 ★ & up"}),(0,a.jsx)("option",{value:"2",children:"2 ★ & up"}),(0,a.jsx)("option",{value:"3",children:"3 ★ & up"}),(0,a.jsx)("option",{value:"4",children:"4 ★ & up"}),(0,a.jsx)("option",{value:"4.5",children:"4.5 ★ & up"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"condition",className:"block mb-1 font-medium text-gray-300 text-sm",children:"Condition"}),(0,a.jsxs)("select",{id:"condition",value:f,onChange:e=>N(Number(e.target.value)),className:"bg-gray-700 px-3 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 w-full text-white",children:[(0,a.jsx)("option",{value:"0",children:"Any"}),(0,a.jsx)("option",{value:"1",children:"New"}),(0,a.jsx)("option",{value:"2",children:"Used"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"latestProduct",className:"block mb-1 font-medium text-gray-300 text-sm",children:"Product Recency"}),(0,a.jsxs)("select",{id:"latestProduct",value:w,onChange:e=>k(Number(e.target.value)),className:"bg-gray-700 px-3 py-2 border border-gray-600 rounded-lg focus:outline-none focus:ring-1 focus:ring-green-500 w-full text-white",children:[(0,a.jsx)("option",{value:"0",children:"Any"}),(0,a.jsx)("option",{value:"7",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90",children:"Last 90 days"})]})]})]}),(0,a.jsxs)("div",{className:"gap-4 grid grid-cols-2 md:grid-cols-4 pt-4 border-gray-700 border-t",children:[(0,a.jsx)(o,{label:"Discount",checked:P,onChange:e=>S(e.target.checked)}),(0,a.jsx)(o,{label:"Tokopedia PLUS",checked:C,onChange:e=>_(e.target.checked)}),(0,a.jsx)(o,{label:"Cash on Delivery",checked:A,onChange:e=>L(e.target.checked)}),(0,a.jsx)(o,{label:"Bebas Ongkir Extra",checked:E,onChange:e=>R(e.target.checked)})]})]}),x&&(0,a.jsx)("p",{className:"my-4 text-red-500 text-center",children:x}),!c&&r.length>0?(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"bg-gray-800 shadow-md rounded-lg min-w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-700",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 font-semibold text-gray-300 text-left",children:"Image"}),(0,a.jsx)("th",{className:"p-4 font-semibold text-gray-300 text-left",children:"Product Name"}),(0,a.jsx)("th",{className:"p-4 font-semibold text-gray-300 text-left",children:"Price"}),(0,a.jsx)("th",{className:"p-4 font-semibold text-gray-300 text-left",children:"Original Price"}),(0,a.jsx)("th",{className:"p-4 font-semibold text-gray-300 text-left",children:"Rating"}),(0,a.jsx)("th",{className:"p-4 font-semibold text-gray-300 text-left",children:"Shop"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-700",children:r.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-700 transition-colors",children:[(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("img",{src:e.image,alt:e.name,className:"rounded-md w-16 h-16 object-cover"})}),(0,a.jsx)("td",{className:"p-4 font-medium",children:(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-green-400 hover:underline",children:e.name})}),(0,a.jsx)("td",{className:"p-4 text-green-400",children:e.real_price_text}),(0,a.jsx)("td",{className:"p-4 text-green-400",children:e.original_price}),(0,a.jsxs)("td",{className:"p-4",children:[e.rating," ★"]}),(0,a.jsxs)("td",{className:"p-4",children:[(0,a.jsx)("a",{href:e.shop.url,target:"_blank",rel:"noopener noreferrer",className:"text-green-400 hover:underline",children:e.shop.name}),(0,a.jsx)("span",{className:"block text-gray-400 text-sm",children:e.shop.city})]})]},e.product_id))})]})}):!c&&!x&&(0,a.jsx)("p",{className:"text-gray-500 text-center",children:"No results to show. Try a new search!"})]})})}}},e=>{e.O(0,[464,441,964,358],()=>e(e.s=770)),_N_E=e.O()}]);